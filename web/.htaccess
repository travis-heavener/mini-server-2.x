# allow only internal network access
Order Deny,Allow
Deny from all
Allow from 192.168.1.0/24
Allow from 127.0.0.1
Allow from 10.0.0.0/24
Allow from ::1
Satisfy all

# Custom ErrorDocument to prevent default 403 from hinting that an asset exists
ErrorDocument 403 /errors/404.html

# remove index.php & such after in url (https://stackoverflow.com/a/9619319)
Options +FollowSymLinks -MultiViews

# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L,QSA]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s(.*)/index\.php [NC]
RewriteRule ^ %1 [R=301,L]